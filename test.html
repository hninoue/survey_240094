<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://unpkg.com/jspsych@7.3.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
    <link href="https://unpkg.com/jspsych@7.3.2/css/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych();

    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;
            
    const hello_trial = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: 'Hello world!'
    }

    const save_data = {
      type: jsPsychPipe,
      action: "save",
      experiment_id: "ZWmEpETHLVnZ",
      filename: filename,
      data_string: ()=>jsPsych.data.get().csv()
    };

     var finalMessage = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `
            <p style="text-align: left;">改めまして、</p>
            <p style="text-align: left;">調査にご協力くださり誠にありがとうございました。</p>
            <p style="text-align: left;"><b>下記のURLをコピーして、新しいブラウザを開き、URLを貼り付けてください。</b></p>
            <p style="text-align: left;">＊URLは、謝礼を送るのに必要な情報を記入していただくGoogleフォームにつながっています。</p>
            <br><br><p>https://forms.gle/fLSUF5Epfn5qnCWYA</p>
            <br><br><b>上記の手順を終えましたら、こちらのブラウザを閉じてください。</b>
        `,
        choices: "NO_KEYS", // キー入力なし
    };

    jsPsych.run([hello_trial, save_data, finalMessage]);
  </script>
</html>
